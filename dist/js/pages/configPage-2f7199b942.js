!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(this,function(){"use strict";var e={msg:function(e){if("string"==typeof e)return layer.msg(e,{time:1500});var t={content:"hello！",icon:1,time:5e3,shade:[.5,"#000"]};return Object.assign(t,e),layer.msg(t.content,t)},loading:function(e){var t={content:"正在加载...",shade:[.4,"#000"],icon:16,time:0};return Object.assign(t,e),layer.msg(t.content,t)},tips:function(e){var t=[{content:"hello",direction:"top",selector:e.selector,bgColor:"#000"}],i=t[0],n=t[1];switch(Object.assign(i,e),i.direction){case"top":n=1;break;case"left":n=4;break;case"right":n=2;break;case"down":n=3}return layer.tips(i.content,i.selector,{tips:[n,i.bgColor]})},confirm:function(e,t,i){var n={content:"hello....",okBtnLabel:"确定",cancelBtnLabel:"取消",icon:1};Object.assign(n,e);var a=layer.confirm(n.content,{btn:[n.okBtnLabel,n.cancelBtnLabel]},function(){"function"==typeof t&&t(a)},function(){"function"==typeof i&&i(a)})},prompt:function(e,t,i){var n={title:"prompt 标题信息",formType:0,okBtnLabel:"确定",cancelBtnLabel:"取消"};Object.assign(n,e),layer.prompt(n,function(e,i,n){"function"==typeof t&&t(e,i,n)},function(e){"cancel"==typeof i&&t(e)})},open:function(e){var t={type:1,title:!1,closeBtn:0,shadeClose:!0,skin:"yourclass",content:"自定义HTML内容"};return Object.assign(t,e),layer.open(t)},close:function(e){layer.close(e)},closeAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";layer.closeAll(e)}},t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function t(e){i(this,t),this.serverUrl="http://servermaster.com/index.php/api/"}return n(t,[{key:"ajax",value:function(t,i){return new Promise(function(n,a){$.ajax({type:t,url:i.url,dataType:"json",data:i.data,timeout:i.timeout||1e4,async:i.async||!0,statusCode:{404:function(e){a(404)}},success:function(t){t.success?n(t):void 0!=t.url&&""!=t.url?location.href=t.url:(a(404),e.msg({content:t.msg,icon:6}))},error:function(e){a(404)}})})}},{key:"getAjax",value:function(e){return this.ajax("get",e)}},{key:"postAjax",value:function(e){return this.ajax("post",e)}},{key:"login",value:function(){return this.getAjax({url:this.serverUrl+"site/info"})}},{key:"loginOut",value:function(){return this.getAjax({url:this.serverUrl+"site/logout"})}},{key:"menuServi",value:function(){var e=this;return{menuList:function(){return e.getAjax({url:e.serverUrl+"menu/list"})},menuAdd:function(t){return e.postAjax({url:e.serverUrl+"menu/add",data:t})},menuAddCsrf:function(t){return e.getAjax({url:e.serverUrl+"menu/add",data:t})},configList:function(){return e.getAjax({url:e.serverUrl+"config/list"})},masterList:function(){return e.getAjax({url:e.serverUrl+"mysql-master/list"})},masterOperateList:function(){return e.getAjax({url:e.serverUrl+"mysql-master-operate/list"})}}}},{key:"configServi",value:function(){var e=this;return{configAdd:function(t){return e.postAjax({url:e.serverUrl+"config/add",data:t})},configAddCsrf:function(t){return e.getAjax({url:e.serverUrl+"config/add",data:t})},modelAdd:function(t){return e.postAjax({url:e.serverUrl+"mode/add",data:t})},modelAddCsrf:function(t){return e.getAjax({url:e.serverUrl+"mode/add",data:t})},modelList:function(t){return e.getAjax({url:e.serverUrl+"mode/list",data:t})},serviceAdd:function(t){return e.postAjax({url:e.serverUrl+"service/add",data:t})},servceAddCsrf:function(t){return e.getAjax({url:e.serverUrl+"service/add",data:t})},serviceList:function(){return e.getAjax({url:e.serverUrl+"service/list"})},applicationAddCsrf:function(t){return e.getAjax({url:e.serverUrl+"application/add",data:t})},applicationAdd:function(t){return e.postAjax({url:e.serverUrl+"application/add",data:t})},applicationList:function(t){return e.getAjax({url:e.serverUrl+"application/list",data:t})},ipBindCsrf:function(t){return e.getAjax({url:e.serverUrl+"config/bind",data:t})},ipBind:function(t){return e.postAjax({url:e.serverUrl+"config/bind",data:t})},masterAdd:function(t){return e.postAjax({url:e.serverUrl+"mysql-master/add",data:t})},masterAddCsrf:function(t){return e.getAjax({url:e.serverUrl+"mysql-master/add",data:t})},changeMaster:function(t){return e.postAjax({url:e.serverUrl+"mysql-master/change",data:t})},changeMasterResult:function(t){return e.getAjax({url:e.serverUrl+"mysql-master/get-result",data:t})}}}},{key:"websiteServi",value:function(){var e=this;return{websiteAdd:function(t){return e.postAjax({url:e.serverUrl+"website/add",data:t})},websiteAddCsrf:function(t){return e.getAjax({url:e.serverUrl+"website/add",data:t})},websiteList:function(t){return e.getAjax({url:e.serverUrl+"website/list",data:t})}}}},{key:"departmentServi",value:function(){var e=this;return{departmentList:function(){return e.postAjax({url:e.serverUrl+"department/list"})},departmentCsrf:function(t){return e.getAjax({url:e.serverUrl+"department/add",data:t})},departmentAdd:function(t){return e.postAjax({url:e.serverUrl+"department/add",data:t})}}}},{key:"adminServi",value:function(){var e=this;return{adminList:function(){return e.getAjax({url:e.serverUrl+"admin/list"})},adminCsrf:function(t){return e.getAjax({url:e.serverUrl+"admin/add",data:t})},adminAdd:function(t){return e.postAjax({url:e.serverUrl+"admin/add",data:t})}}}},{key:"logServi",value:function(){var e=this;return{logList:function(t){return e.getAjax({url:e.serverUrl+"log/list",data:t})}}}}]),t}(),r=function(){return window.localStorage?JSON.parse(window.localStorage["menu-list"]||"{}"):{}},o=function(e){e||(e=window.location.href);for(var t=[],i=void 0,n=window.location.href.slice(e.indexOf("?")+1).split("&"),a=0;a<n.length;a++)i=n[a].split("="),t.push(i[0]),t[i[0]]=i[1];return t},s=function(e,t,i,n){laytpl($(e).html()).render(i,function(e){$(t).html(e),"function"==typeof n&&n(e)})},c=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].name]=e[i].value;return t},d=function(e,t){$(e).val(t)},l=function(e){var t=!1;for(var i in e)t=!0;return t},u=function(e,t,i,n,a){var r="";t.forEach(function(e,t){n!==!1&&i!==!1||(i=t,n=t),r+=a==e[i]?'<option selected value="'+e[i]+'">'+e[n]+"</option>":'<option value="'+e[i]+'">'+e[n]+"</option>"}),$(e).html(r)},f=function(e,t,i,n,a){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o="";t.forEach(function(e,t){n!==!1&&i!==!1||(i=t,n=t),o+=r==e[i]?'<label class="radio-inline" for="'+a+"_"+t+'">\n\t                    \t<input type="radio" checked="checked" name="'+a+'" id="'+a+"_"+t+'" value="'+e[i]+'" required=""> '+e[n]+"\n\t                    </label>":'<label class="radio-inline" for="'+a+"_"+t+'">\n\t                    \t<input type="radio" name="'+a+'" id="'+a+"_"+t+'" value="'+e[i]+'" required=""> '+e[n]+"\n\t                    </label>"}),$(e).html(o)};window.dateFormat=function(e,t){if(void 0==e||""==e)return"";var i="",n=new Date(1e3*parseInt(e)),a=n.getDate()<10?"0"+n.getDate():n.getDate(),r=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,o=n.getFullYear(),s=n.getHours()<10?"0"+n.getHours():n.getHours(),c=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),d=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();switch(t){case"MM/dd/YYYY HH:mm:ss":i=o+"/"+r+"/"+a+" "+s+":"+c+":"+d}return i},Array.prototype.remove=function(){for(var e,t,i=arguments,n=i.length;n&&this.length;)for(e=i[--n];(t=this.indexOf(e))!==-1;)this.splice(t,1);return this};var v=(function(){function e(){i(this,e),this.menuData=[]}return n(e,[{key:"sideMenuToggleBind",value:function(){$(".js_menu_wrap").on("click",".js_menu_item",function(e){$(e.target).hasClass("sub-menu-name")||($(this).addClass("open-menu").siblings().removeClass("open-menu"),$(this).siblings().find(".menu-name .toggle-icon").removeClass("glyphicon-menu-down"),$(this).find(".menu-name .toggle-icon").toggleClass("glyphicon-menu-down"))}),$(".js_menu_wrap").on("click",".js_menu_item .menu-name",function(){$(".js_menu_item .menu-name").next().stop().slideUp("fast"),$(this).next().stop().toggle("fast")}),$(".js_menu_wrap").on("click",".js_sub_menu_wrap .sub-menu-item",function(){$(".js_sub_menu_wrap .sub-menu-item").removeClass("active"),$(this).addClass("active").siblings().removeClass("active")})}},{key:"navMenuToggleBind",value:function(){var e=this;$(".js_nav_menu_toggle").on("click",function(){e.toggle()})}},{key:"autoToggle",value:function(){function e(){new Date-t<n?setTimeout(e,n):(i=!1,$(window).width()<=1200?($(".js_nav_menu_toggle").removeClass("leave-toggle").addClass("enter-toggle"),$("#side_menu").animate({width:"0px",minWidth:"0"},150),$("#side_menu").removeClass("leave-toggle").addClass("enter-toggle")):($(".js_nav_menu_toggle").removeClass("enter-toggle").addClass("leave-toggle"),$("#side_menu").animate({width:"220px",minWidth:"220px"},150),$("#side_menu").removeClass("enter-toggle").addClass("leave-toggle")))}var t="",i=!1,n=200;$(window).resize(function(){t=new Date,i===!1&&(i=!0,setTimeout(e,n))})}},{key:"toggle",value:function(){$("#side_menu").hasClass("enter-toggle")?($(".js_nav_menu_toggle").removeClass("enter-toggle").addClass("leave-toggle"),$("#side_menu").animate({width:"220px",minWidth:"220px"},300),$("#side_menu").removeClass("enter-toggle").addClass("leave-toggle")):($(".js_nav_menu_toggle").removeClass("leave-toggle").addClass("enter-toggle"),$("#side_menu").animate({width:"0px",minWidth:"0"},300),$("#side_menu").removeClass("leave-toggle").addClass("enter-toggle"))}},{key:"autoToggleSideMenu",value:function(e){var t=[!1],i=t[0],n=t[1];t[2];e.menuData.some(function(t,a){if(t._child.some(function(t,r){if(e.currentMenu===t.menu_act)return i=!0,n=a,!0}),i)return $(".js_menu_item").removeClass("open-menu"),$(".js_menu_item").eq(n).siblings().find(".js_sub_menu_wrap").hide(),$(".js_menu_item").eq(n).addClass("open-menu").find(".js_sub_menu_wrap").show(),$(".js_menu_item").eq(n).find(".toggle-icon").addClass("glyphicon-menu-down"),$(".js_menu_item").eq(n).siblings().find(".toggle-icon").removeClass("glyphicon-menu-down"),!0})}},{key:"renderMenu",value:function(e){var t={menuData:e,currentMenu:(new v).getCacheView()},i=this;this.menuData=e,this.cacheMenu(e),s("#sideMenuTpl","#js_menu_wrap",t,function(e){i.autoToggleSideMenu(t)})}},{key:"cacheMenu",value:function(e){function t(e){if(e instanceof Array){var t={};return e.forEach(function(e,i){e._child.forEach(function(e,i){t[e.menu_act]=e})}),t}}window.localStorage&&(localStorage["menu-list"]=JSON.stringify(t(e)))}},{key:"init",value:function(){this.sideMenuToggleBind(),this.navMenuToggleBind(),this.autoToggle()}}]),e}(),function(){function a(){i(this,a),this.clearView(),this.initView="listConfig",this.routerConfig=r()}return n(a,[{key:"loadTemplate",value:function(t,i){var n=this;return t=t||this.getCacheView()||this.initView,new Promise(function(a,r){if(n.routerConfig[t]){var o=[n.routerConfig[t].template_url,n],s=o[0],c=o[1];$(".js_view_content").load(s,function(e){c.changeUrl(t,i),c.setCacheView(t),c.viewAnimate(),a(e)})}else e.msg({content:"模板页面未找到，请检查重新配置!",icon:5})})}},{key:"bindRouter",value:function(e){var t=this;$(document).on("click",".js_view_link",function(){$(this).data("view")!=t.getCacheView()&&$(this).data("view")&&(t.go($(this).data("view")),"function"==typeof e&&e($(this).data("view")))})}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.loadTemplate(e,t)}},{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.loadTemplate(e,t)}},{key:"changeUrl",value:function(e,t){var i="",n="",a=location.hash.indexOf("?");a>0&&(n=location.hash.substr(location.hash.indexOf("?"))),t===!1||(t&&l(t)?(i=a>0?"&"+$.param(t):"?"+$.param(t),window.location.href="#"+e+n+i):window.location.href="#"+e)}},{key:"setCacheView",value:function(e){window.localStorage&&(localStorage["active-view"]=e)}},{key:"setRouterParamCache",value:function(e){window.localStorage&&"object"===("undefined"==typeof e?"undefined":t(e))&&(localStorage["param-data"]=JSON.stringify(e))}},{key:"routerParam",value:function(e){var t=o();return e?t[e]:t}},{key:"clearView",value:function(){"/index.html"!=window.location.pathname&&"/"!=window.location.pathname||""!=window.location.hash||localStorage.removeItem("active-view")}},{key:"getCacheView",value:function(){return window.localStorage?localStorage["active-view"]||this.initView:this.initView}},{key:"currentView",value:function(){return this.getCacheView()}},{key:"viewAnimate",value:function(){var e=$(".js_view_content > section");0!=e.length&&e.addClass("view-animated")}}]),a}()),g={services:new a,viewManage:new v,csrf:"",renderAddConfig:function(e,t){var i=this;this.services.configServi().configAddCsrf(e).then(function(e){i.csrf=e.data.csrf,u("#website_list",e.data.website_list,"code","name"),f("#service_list_wrap",e.data.service_list,"code","name","service_name"),f("#application_list_wrap",e.data.application_list,"code","name","application_name"),f("#mode_list_wrap",e.data.mode_list,"code","name","mode"),"function"==typeof t&&t()})},renderEditorConfig:function(e,t){var i=this;this.services.configServi().configAddCsrf(e).then(function(e){i.csrf=e.data.csrf,u("#website_list",e.data.website_list,"code","name",e.data.info.website_code),f("#service_list_wrap",e.data.service_list,"code","name","service_name",e.data.info.service_name),f("#application_list_wrap",e.data.application_list,"code","name","application_name",e.data.info.application_name),f("#mode_list_wrap",e.data.mode_list,"code","name","mode",e.data.info.mode),d("#url",e.data.info.url),e.data.info.all_ip.forEach(function(t,n){var a=t==e.data.info.current_ip;i.addIpOption(t,a)}),"function"==typeof t&&t()})},renderEditorServices:function(e,t){var i=this;this.services.configServi().servceAddCsrf(e).then(function(e){i.csrf=e.data.csrf,d("#servicesName",e.data.info.name),"function"==typeof t&&t()})},renderEditorModel:function(e,t){var i=this;this.services.configServi().modelAddCsrf(e).then(function(e){i.csrf=e.data.csrf,d("#modelName",e.data.info.name),"function"==typeof t&&t()})},renderEditorApplication:function(e,t){var i=this;this.services.configServi().applicationAddCsrf(e).then(function(e){i.csrf=e.data.csrf,d("#appName",e.data.info.name),"function"==typeof t&&t()})},renderEditorWebsite:function(e,t){var i=this;this.services.websiteServi().websiteAddCsrf(e).then(function(e){i.csrf=e.data.csrf,d("#name",e.data.info.name),d("#code",e.data.info.code),d("#logo",e.data.info.logo),"function"==typeof t&&t()})},getAddServicesCsrf:function(e){var t=this;this.services.configServi().servceAddCsrf().then(function(i){t.csrf=i.data.csrf,"function"==typeof e&&e(i)})},getAddModeCsrf:function(e){var t=this;this.services.configServi().modelAddCsrf().then(function(i){t.csrf=i.data.csrf,"function"==typeof e&&e(i)})},getAddApplicationCsrf:function(e){var t=this;this.services.configServi().applicationAddCsrf().then(function(i){t.csrf=i.data.csrf,"function"==typeof e&&e(i)})},getAddWebsiteCsrf:function(e){var t=this;this.services.websiteServi().websiteAddCsrf().then(function(i){t.csrf=i.data.csrf,"function"==typeof e&&e(i)})},validatorForm:function(e,t){$(e).validator("update").on("submit",function(e){e.isDefaultPrevented()?console.log(0):(e.preventDefault(),"function"==typeof t&&t($(this)))})},addIpOption:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="current_ip",n=(new Date).getTime();t===!0?$("#all_ip_wrap").append('<label class="radio-inline js_'+i+"_"+n+'" for="'+i+"_"+n+'">\n\t            \t<input type="radio" checked="checked" name="'+i+'" id="'+i+"_"+n+'" value="'+e+'" required=""> '+e+'\n\t            \t<a href="javascript:void(0);" class="text text-danger text-underline option-editor-btn js_del_ip" data-id="'+n+'">删除</a>\n\t            </label>'):$("#all_ip_wrap").append('<label class="radio-inline js_'+i+"_"+n+'" for="'+i+"_"+n+'">\n\t            \t<input type="radio" name="'+i+'" id="'+i+"_"+n+'" value="'+e+'" required=""> '+e+'\n\t            \t<a href="javascript:void(0);" class="text text-danger text-underline option-editor-btn js_del_ip" data-id="'+n+'">删除</a>\n\t            </label>'),$("#js_add_config_form").validator("update")},submitAddConfig:function(t,i){var n=this;t.find("button[type=submit]").button("loading"),this.services.configServi().configAdd(i).then(function(i){t.find("button[type=submit]").button("reset"),e.msg("配置信息保存成功"),n.viewManage.go("listConfig")}).catch(function(e){t.find("button[type=submit]").button("reset")})},submitAddService:function(t){var i=this;this.services.configServi().serviceAdd(t).then(function(t){e.msg("服务保存成功"),i.viewManage.go("listServices")})},submitAddModel:function(t){var i=this;this.services.configServi().modelAdd(t).then(function(t){e.msg("模式保存成功"),i.viewManage.go("listModel")})},submitAddWebsite:function(t){var i=this;this.services.websiteServi().websiteAdd(t).then(function(t){e.msg("項目保存成功"),i.viewManage.go("listWebsite")})},submitAddApplication:function(t){var i=this;this.services.configServi().applicationAdd(t).then(function(t){e.msg("应用场景保存成功"),i.viewManage.go("listApplication")})},renderConfigList:function(){var t=e.loading({content:"正在加载..."});this.services.menuServi().configList().then(function(i){e.close(t),s("#configListTable","#configListTbody",i.data)})},renderMasterOperateList:function(){var t=e.loading({content:"正在加载..."});this.services.menuServi().masterOperateList().then(function(i){e.close(t),s("#masterOperateListTable","#masterOperateListTbody",i.data)})},renderViewChangeMasterResult:function(t){var i=e.loading({content:"正在加载..."});this.services.configServi().changeMasterResult(t).then(function(n){e.close(i),s("#viewMasterOperateTable","#viewMasterOperateTbody",n.data),n.data.refresh&&setTimeout(function(){g.renderViewChangeMasterResult(t)},5e3)})},renderMasterList:function(){var t=e.loading({content:"正在加载..."});this.services.menuServi().masterList().then(function(i){e.close(t),s("#masterListTable","#masterListTbody",i.data)})},renderWebsiteList:function(){var t=e.loading({content:"正在加载..."});this.services.websiteServi().websiteList().then(function(i){e.close(t),s("#webSiteTpl","#js_website_wrap",i.data)})},renderServiceList:function(){var t=e.loading({content:"正在加载..."});this.services.configServi().serviceList().then(function(i){e.close(t),s("#servicesListTpl","#servicesListTbody",i.data)}).catch(function(t){e.closeAll()})},renderModelList:function(){var t=e.loading({content:"正在加载..."});this.services.configServi().modelList().then(function(i){e.close(t),s("#modelListTpl","#modelListTbody",i.data)}).catch(function(t){e.closeAll()})},renderAppList:function(){var t=e.loading({content:"正在加载..."});this.services.configServi().applicationList().then(function(i){e.close(t),s("#applicationListTpl","#addApplicationListTbody",i.data)}).catch(function(t){e.closeAll()})},submitBindIp:function(t){var i=e.loading({content:"正在绑定..."});this.services.configServi().ipBind(t).then(function(t){e.close(i),e.msg(t.msg),setTimeout(function(){window.location.reload()},1500)}).catch(function(t){e.close(i)})},renderEditMysqlMaster:function(e,t){var i=this;this.services.configServi().masterAddCsrf(e).then(function(e){i.csrf=e.data.csrf,d("#code",e.data.info.code),d("#master_ip",e.data.info.master_ip),"function"==typeof t&&t()})},submitAddMaster:function(t,i){var n=this;t.find("button[type=submit]").button("loading"),this.services.configServi().masterAdd(i).then(function(i){t.find("button[type=submit]").button("reset"),e.msg("主库信息保存成功"),n.viewManage.go("listMaster")}).catch(function(e){t.find("button[type=submit]").button("reset")})},submitChangeMaster:function(t){var i=this,n=e.loading({content:"正在切换..."});this.services.configServi().changeMaster(t).then(function(t){e.close(n),1==t.success?(e.msg("正在切换，稍等一会查看结果"),setTimeout(function(){i.viewManage.go("viewChangeMasterResult",{operateId:t.data.id})},3e3)):e.msg(t.msg)}).catch(function(t){e.close(n)})}};$(function(){var t=g.viewManage.currentView();if(t.match(/addConfig/gi))g.renderAddConfig({},function(){g.validatorForm("#js_add_config_form",function(t){var i={csrf:g.csrf,all_ip:[]};return $("#all_ip_wrap").find("input[name='current_ip']").map(function(e,t){i.all_ip.push($(t).val())}),0==i.all_ip.length?void e.msg("请填写IP地址"):(Object.assign(i,c(t.serializeArray())),void g.submitAddConfig(t,i))})});else if(t.match(/addServices/gi))g.getAddServicesCsrf(),g.validatorForm("#js_add_services_form",function(e){var t={csrf:g.csrf};Object.assign(t,c(e.serializeArray())),g.submitAddService(t)});else if(t.match(/addModel/gi))g.getAddModeCsrf(),g.validatorForm("#js_add_model_form",function(e){var t={csrf:g.csrf};Object.assign(t,c(e.serializeArray())),g.submitAddModel(t)});else if(t.match(/addApplication/gi))g.getAddModeCsrf(),g.validatorForm("#js_add_application_form",function(e){var t={csrf:g.csrf};Object.assign(t,c(e.serializeArray())),g.submitAddApplication(t)});else if(t.match(/listConfig/gi)){g.renderConfigList(),$("#configListTbody").on("click",".js_editor_config",function(){var e=$(this).data("id");g.viewManage.go("editorConfig",{configId:e})});var i="",n="";$("#configListTbody").on("click",".js_set_ip",function(){i=$(this).data("current-id"),n=$(this).find("a").text(),$(".js_bind_ip_"+i).find(".btn_val").html(n)}),$("#configListTbody").on("click",".js_bind_ip_btn",function(){i=$(this).data("current-id"),n=$(".js_bind_ip_"+i).find(".btn_val").html();var t=$(".js_bind_ip_"+i).find(".btn_val").data("current-ip");return t==n?void e.msg("当前IP未改变"):void g.submitBindIp({id:i,current_ip:n})})}else if(t.match(/editorConfig/gi)){var a=g.viewManage.routerParam("configId");a&&g.renderEditorConfig({id:a},function(){g.validatorForm("#js_add_config_form",function(t){var i={csrf:g.csrf,all_ip:[]};return $("#all_ip_wrap").find("input[name='current_ip']").map(function(e,t){i.all_ip.push($(t).val())}),0==i.all_ip.length?void e.msg("请填写IP地址"):(Object.assign(i,c(t.serializeArray()),{id:a}),void g.submitAddConfig(t,i))})})}else if(t.match(/addWebsite/gi))g.getAddWebsiteCsrf(),g.validatorForm("#js_add_website_form",function(e){var t={csrf:g.csrf};Object.assign(t,c(e.serializeArray())),g.submitAddWebsite(t)});else if(t.match(/listWebsite/gi))g.renderWebsiteList(),$("#js_website_wrap").on("click",".js_website_item",function(){var e=$(this).data("id");g.viewManage.go("editorWebsite",{editorId:e})});else if(t.match(/listServices/gi))g.renderServiceList(),$("#servicesListTbody").on("click",".js_editor_services",function(){var e=$(this).data("id");g.viewManage.go("editorServices",{servicesId:e})});else if(t.match(/editorServices/gi)){var r=g.viewManage.routerParam("servicesId");g.renderEditorServices({id:r},function(e){g.validatorForm("#js_add_services_form",function(e){var t={csrf:g.csrf,id:r};Object.assign(t,c(e.serializeArray())),g.submitAddService(t)})})}else if(t.match(/editorWebsite/gi)){var o=g.viewManage.routerParam("editorId");g.renderEditorWebsite({id:o},function(e){g.validatorForm("#js_add_website_form",function(e){var t={csrf:g.csrf,id:o};Object.assign(t,c(e.serializeArray())),g.submitAddWebsite(t)})})}else if(t.match(/editorModel/gi)){var s=g.viewManage.routerParam("modelId");g.renderEditorModel({id:s},function(e){g.validatorForm("#js_add_model_form",function(e){var t={csrf:g.csrf,id:s};Object.assign(t,c(e.serializeArray())),g.submitAddModel(t)})})}else if(t.match(/listModel/gi))g.renderModelList(),$("#modelListTbody").on("click",".js_editor_model",function(){var e=$(this).data("id");g.viewManage.go("editorModel",{modelId:e})});else if(t.match(/listApplication/gi))g.renderAppList(),$("#addApplicationListTbody").on("click",".js_editor_app",function(){var e=$(this).data("id");g.viewManage.go("editorApplication",{applicationId:e})});else if(t.match(/editorApplication/gi)){var d=g.viewManage.routerParam("applicationId");g.renderEditorApplication({id:d},function(e){g.validatorForm("#js_add_application_form",function(e){var t={csrf:g.csrf,id:d};Object.assign(t,c(e.serializeArray())),g.submitAddApplication(t)})})}else if(t.match(/listMaster/gi))g.renderMasterList(),$("#masterListTbody").on("click",".js_editor_master",function(){var e=$(this).data("id");g.viewManage.go("editMysqlMaster",{configId:e})}),$("#masterListTbody").on("click",".js_change_master",function(){var t=$(this);e.confirm({content:"确定切换主库?"},function(){var e=t.data("id");g.submitChangeMaster({id:e})})});else if(t.match(/addMysqlMaster/gi))g.validatorForm("#js_add_master_form",function(e){var t={};Object.assign(t,c(e.serializeArray())),g.submitAddMaster(e,t)});else if(t.match(/editMysqlMaster/gi)){var l=g.viewManage.routerParam("configId");g.renderEditMysqlMaster({id:l},function(e){g.validatorForm("#js_add_master_form",function(e){var t={csrf:g.csrf,id:l};Object.assign(t,c(e.serializeArray())),g.submitAddMaster(e,t)})})}else if(t.match(/listOperateMaster/gi))g.renderMasterOperateList(),$("#masterOperateListTbody").on("click",".js_view_result",function(){var e=$(this).data("id");g.viewManage.go("viewChangeMasterResult",{operateId:e})});else if(t.match(/viewChangeMasterResult/gi)){var u=g.viewManage.routerParam("operateId");g.renderViewChangeMasterResult({id:u})}$(".js_add_ip_btn").click(function(){e.prompt({title:"请输入IP地址"},function(t,i,n){g.addIpOption(t),e.close(i)})}),$("#all_ip_wrap").on("click",".js_del_ip",function(){$(".js_current_ip_"+$(this).data("id")).remove(),$("#js_add_config_form").validator("update")})})});